"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[886],{87886:(e,t,r)=>{r.d(t,{ZP:()=>V,Ao:()=>y,Vv:()=>b,Tc:()=>p,fm:()=>v,Vz:()=>L,ef:()=>I});var n=r(21902),o=r(44606),i=r(22770),a=r(24545);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={dataZoom:[{type:"inside"}]},m=["#3288FA","#1FCC4D","#FF8D26","#44D7B6","#FFEC3D","#B37FEB","#F75660"],p=function(e){var t=e.xAxis,r=e.xAxisFormatter,n=e.yAxisFormatter,o=e.yAxis,i=e.dataset,a=e.series,c=e.scale,l=e.graphic,u=e.grid;return e.animation,s({color:m,graphic:l,grid:s({containLabel:!0,top:40,left:15,right:15,bottom:30},u||{}),xAxis:s(s({},t),{},{scale:!0,nameGap:t.nameGap||30,nameLocation:"middle",axisLine:{onZero:!1,lineStyle:{color:"#A6B5CC"}},splitLine:{show:!1},axisTick:{show:!0,lineStyle:{color:"#A6B5CC"}},axisLabel:s(s({},t.axisLabel||{}),{},{formatter:function(e){return r?r(e):e}})}),yAxis:s(s({},o),{},{scale:!0,axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#40454D"}},axisLabel:{formatter:function(e){return n?n(e):e}}}),dataset:i,series:a,animation:!1,tooltip:{position:function(e,t,r,n,o){var i=o.viewSize[0]-o.contentSize[0],a=e[0];return[Math.max(Math.min(a,i),0),e[1]]},trigger:"axis",formatter:function(e){var t,r=null===(t=e[0].value)||void 0===t?void 0:t[0];return'<div style="font-weight: bold; font-size: 16px;">'.concat(r,"</div>")+e.reduce((function(e,t){var r,n,o=(null===(r=a[t.seriesIndex])||void 0===r||null===(r=r.lineStyle)||void 0===r?void 0:r.color)||a.color||m[t.seriesIndex],i='<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'.concat(o,';"></span>');return"".concat(e).concat(i," ").concat(t.seriesName,": ").concat((null===(n=t.value)||void 0===n?void 0:n[1])||"-","<br>")}),"")},padding:[10,16,10,16],backgroundColor:"rgba(255,255,255,0.21)",extraCssText:"box-shadow:  0px 6px 12px 2px rgba(0,0,0,0.1);backdrop-filter: blur(5px);",borderColor:"transparent",textStyle:{color:"white"}},legend:{show:!1,zLevel:2},textStyle:{color:"#808B9D"}},c?f:{})};function y(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!e)return[];var a={},c=e.map((function(e){return[e[t]+o,e[r]]}));return i&&(c=c.filter((function(e){var t,r,n=(t=e,r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return!a[n]&&(a[n]=!0,!0)}))),n&&e.length&&c.push([e[0][t],e[0][r]]),c}function b(e,t,r){if(!e||!t||e.length!==t.length)return[];for(var n=[],o=0;o<t.length;o+=1){var i=Number(e[o]),a=Number(t[o]);void 0!==r&&(a=r(a)),n.push([i,a])}return n}function v(e,t,r){if("timestampSec"===r)return t;var n=(e||[]).map((function(e){return e.timestampSec})),o=(e||[]).map((function(e){return e[r]}));return new a.LinearInterpolant(n,o,1,[]).evaluate(t)[0]}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){var n;return n=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==g(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t,r,a=e.legends,c=e.onClick,l=(0,o.BH)((function(e){return{"legend-flex-container":{textAlign:"center",marginBottom:"-6px",marginTop:e.tokens.margin.speace2},"legend-container":{display:"inline-flex",flexWrap:"wrap",margin:"0 6px 0px ".concat(e.tokens.margin.speace2)},"legend-item":x(x({cursor:"pointer",display:"flex",alignItems:"center",userSelect:"none",color:e.tokens.colors.fontColor2},e.tokens.typography.sideText),{},{marginRight:"10px","& .anticon":{marginRight:"6px"}}),"legend-unactive":{position:"relative",color:e.tokens.colors.fontColor4,"& .anticon":{color:"".concat(e.tokens.colors.fontColor4," !important")},"&::after":{content:'""',position:"absolute",left:0,right:0,margin:"auto",height:"1px",background:e.tokens.colors.fontColor4}},"legend-icon":{}}}))(),u=l.classes,s=l.cx,f=(t=(0,n.useState)({}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],y=f[1];return(0,n.useEffect)((function(){var e={};a.forEach((function(t){var r=t.name;e[r]=!(r in p)||p[r]})),y(e)}),[a]),a.length<=1?null:n.createElement("div",{className:u["legend-flex-container"]},n.createElement("div",{className:u["legend-container"]},a.map((function(e,t){return n.createElement("div",{className:s(u["legend-item"],O({},u["legend-unactive"],!p[e.name])),onClick:function(){return t=e.name,y((function(e){return x(x({},e),{},O({},t,!e[t]))})),void c(t);var t},key:"".concat(e.name,"_").concat(t+1)},n.createElement(i.T0,{className:u,style:{color:e.color||m[t]}}),e.name)}))))}const j=n.memo(S);var w=r(91217),E=r(52007),k=r(54638),P=r(97265),C=r.n(P);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==A(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=r(42801),T=r.n(N),I=n.createContext(null);function L(){var e=(0,n.useRef)({}),t=(0,n.useRef)({scrollElem:null}),r=(0,n.useRef)(),o=function(){var r=t.current.scrollElem;if(r){var n=r.scrollTop+r.offsetHeight,o=r.scrollTop;Object.keys(e.current).forEach((function(t){var i=e.current[t],a=i.elem,c=i.cb;if(a){var l=function(e,t){for(var r=0,n=e,o=e;;){var i=n.parentElement,a=getComputedStyle(i,null).getPropertyValue("position"),c="HTML"===i.tagName||i===t;if((["relative","absolute","fixed"].includes(a)||c)&&(r+=o.offsetTop,o=i),n=i,c)break}return r}(a,r);c(a.offsetHeight+l>o&&l<n)}else c(!1)}))}},i=(0,n.useCallback)(T()((function(e){t.current.scrollElem=e,e.addEventListener("scroll",(function(){o()})),r.current=new ResizeObserver((function(){o()})),r.current.observe(e)})),[]),a=(0,n.useCallback)((function(e){e&&i(e)}),[]),c=(0,n.useCallback)((function(t,r,n){return e.current[t]={elem:r,cb:n},o(),function(){delete e.current[t],o()}}),[]);return(0,n.useEffect)((function(){return function(){r.current.disconnect()}}),[]),(0,n.useMemo)((function(){return{onRef:a,contextValue:{regisitScrollEvent:c}}}),[a,c])}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==B(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e){var t=e.onRefresh,r=e.onReset,a=e.yAxisName,c=e.onLegendClick,l=e.onCanvasRef,u=e.legends,s=e.title,f=e.autoHeight,m=e.titleExtra,p=e.className,y=e.onRef,b=(0,o.BH)((function(e){return{"moniter-item-container":{backgroundColor:"#282D38",color:e.tokens.colors.fontColor2,borderRadius:"6px"},"moniter-item-title":R(R({},e.tokens.typography.sideText),{},{lineHeight:"32px",textAlign:"center",background:"#343C4D",borderRadius:"6px 6px 0px 0px",marginBottom:e.tokens.margin.speace2,position:"relative"}),"moniter-item-title-extra":{position:"absolute",top:0,bottom:0,right:"16px",display:"flex",alignItems:"center"},"moniter-item-chart-container":{width:"100%",height:"300px",position:"relative","&.autoHeight":{height:0,paddingBottom:"100%"}},"moniter-item-chart":{position:"absolute",left:0,top:0,right:0,bottom:0},"moniter-item-toolbox":{margin:"".concat(e.tokens.margin.speace," ").concat(e.tokens.margin.speace2," -23px ").concat(e.tokens.margin.speace2),display:"flex",justifyContent:"space-between"},"moniter-item-yaxis":{fontFamily:"PingFangSC-Regular",fontSize:"12px",color:"#808B9D"},"moniter-item-operate":{position:"relative",zIndex:2,display:"flex",alignItems:"center","& > .anticon":{cursor:"pointer",display:"block","&:hover":{color:e.tokens.font.reactive.mainHover},"&:active":{color:e.tokens.font.reactive.mainActive}}},"refresh-ic":{fontSize:e.tokens.font.size.large,marginLeft:e.tokens.margin.speace}}}))(),v=b.classes,g=b.cx;return n.createElement("div",{ref:y,className:g(v["moniter-item-container"],p||"")},n.createElement("div",{className:v["moniter-item-title"]},s||"-",n.createElement("div",{className:v["moniter-item-title-extra"]},m)),n.createElement(j,{legends:u,onClick:c}),n.createElement("div",{className:v["moniter-item-toolbox"]},n.createElement("span",{className:v["moniter-item-yaxis"]},a),n.createElement("div",{className:v["moniter-item-operate"]},n.createElement(k.Z,{trigger:"hover",content:"Clear view"},n.createElement(i.uS,{onClick:r})),!!t&&n.createElement(k.Z,{trigger:"hover",content:"Refresh view"},n.createElement(i.tr,{onClick:t,className:v["refresh-ic"]})))),n.createElement("div",{className:g(v["moniter-item-chart-container"],{autoHeight:f})},n.createElement("div",{className:v["moniter-item-chart"],ref:l})))}var G=n.memo(Z);function V(e){var t=(0,E.R)().onPanelResize,r=e.options,o=e.onRefresh,i=e.title,a=e.labelRotateBoundary,c=e.autoHeight,l=e.titleExtra,u=e.className,s=e.onClear,f=z((0,n.useState)(0),2),m=f[0],p=f[1],y=z((0,n.useState)(C().generate),1)[0],b=(0,n.useRef)(),v=z((0,n.useState)([]),2),g=v[0],d=v[1],h=(0,n.useRef)(),x=z((0,n.useState)(""),2),O=x[0],S=x[1],j=(0,n.useRef)(0),k=n.useContext(I),P=(0,n.useRef)(!0),A=(0,n.useMemo)((function(){return g}),[JSON.stringify(g)]),D=(0,n.useCallback)((function(e){h.current.dispatchAction({type:"legendToggleSelect",name:e})}),[]);(0,n.useEffect)((function(){var e=setInterval((function(){b.current.clientWidth&&(h.current=w.S1(b.current,null,{}),clearInterval(e))}),50);return t((function(e){var t;null===(t=h.current)||void 0===t||t.resize(),a&&(j.current=e<a?45:0,p((function(e){return e+1})))})),function(){var t;null===(t=h.current)||void 0===t||t.dispose(),clearInterval(e)}}),[]);var R=(0,n.useCallback)((function(){s?s():h.current.dispatchAction({type:"dataZoom",start:0,end:100})}),[]);(0,n.useEffect)((function(){if(r&&P.current){var e=M({},r);a&&function(e,t){M({},e);t?(e.xAxis.nameGap=70,e.xAxis.axisLabel.rotate=t):(e.xAxis.nameGap=30,e.xAxis.axisLabel.rotate=0)}(e,j.current),e.graphic&&function(e){try{e.graphic.forEach((function(e){if("polygon"===e.type)e.shape.points=e.shape.points.filter((function(e){return!!e})).map((function(e){var t;return null===(t=h.current)||void 0===t?void 0:t.convertToPixel({seriesIndex:0},e)})).filter((function(e){return!!e}));else if("text"===e.type){var t,r=null===(t=h.current)||void 0===t?void 0:t.convertToPixel({seriesIndex:0},[e.x,e.y]);r?(e.x=r[0],e.y=r[1]):e.style={}}}))}catch(e){}}(e),e.yAxis.name&&function(e){S(e.yAxis.name),delete e.yAxis.name}(e),function(e){var t;h.current&&P.current&&(null===(t=h.current)||void 0===t||t.setOption(e,{replaceMerge:["dataset","graphic"]}))}(e),d((e.series||[]).map((function(e){var t;return{name:e.name,color:null===(t=e.lineStyle)||void 0===t?void 0:t.color}})))}}),[r,m]);var N=(0,n.useRef)({unDo:function(){return!1}}),T=(0,n.useCallback)((function(e){k&&(N.current.unDo=k.regisitScrollEvent(y,e,(function(e){P.current=e})))}),[]);return(0,n.useEffect)((function(){return function(){N.current.unDo()}}),[]),n.createElement(G,{onRef:T,autoHeight:c,onReset:R,onRefresh:o,onLegendClick:D,title:i,yAxisName:O,onCanvasRef:b,legends:A,titleExtra:l,className:u})}}}]);