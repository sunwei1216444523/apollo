"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[492],{8182:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(21902),u=t(44606);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function c(e){var n=(0,u.BH)((function(e){return{"dreamview-nodata-placeholder":{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",fontFamily:"PingFangSC-Regular",fontSize:"14px",color:"#5D6573",backgroundColor:"#0F1014"},error:{color:e.tokens.colors.error},info:{color:e.tokens.colors.brand2},warn:{color:e.tokens.colors.warn}}}))().classes;return r.createElement("div",o({className:n["dreamview-nodata-placeholder"]},e),r.createElement("img",{style:{width:160,height:100},src:t(34534),alt:"no data"}),r.createElement("div",null,e.text))}const a=r.memo(c)},4492:(e,n,t)=>{t.d(n,{Z:()=>N});var r=t(21902),u=t(5725),o=t(25625),c=t(57795),a=t(4022),i=t(54067),l=t(77576),s=t(43975),f=t(93793),d=t(16125),b=t(32870),y=t(4564),v=t(955),m=t(89617),p=t(9804);var h=t(15297),g=t(17597);function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function k(e){var n=e.active,t=void 0!==n&&n,u=e.keyDownHandlers,o=(e.keyUpHandlers,(0,r.useRef)()),c=(0,r.useRef)(t),a=(0,r.useRef)([]),i=(0,r.useCallback)((function(e){return function(n,t,r){var u=new Array(t.length).fill(!1);t.forEach((function(t,o){a.current.push(e.pipe((0,h.h)((function(e){if(e instanceof KeyboardEvent){var n,c=t.toLowerCase(),a=null===(n=e.key)||void 0===n?void 0:n.toLowerCase(),i=setTimeout((function(){u[o]=!1,clearTimeout(i)}),200);return r?e[r]&&a===c:a===c}return!1}))).subscribe((function(e){u[o]=!0,u.reduce((function(e,n){return e&&n}),!0)?(n(e),u=u.fill(!1)):e.preventDefault()})))}))}}),[]);return(0,r.useEffect)((function(){c.current=t}),[t]),(0,r.useEffect)((function(){if(u)for(var e=u.length,n=function(){var e=(0,g.R)(document,"keydown"),n=i(e),r=u[t];n((function(e){c.current&&(null==r||r.handler(e))}),null==r?void 0:r.keys,null==r?void 0:r.functionalKey)},t=0;t<e;t+=1)n();return function(){var e,n=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return S(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,u=function(){};return{s:u,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){a=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(a)throw o}}}}(a.current);try{for(n.s();!(e=n.n()).done;)e.value.unsubscribe()}catch(e){n.e(e)}finally{n.f()}a.current=[]}}),[u]),r.createElement("div",{ref:o,style:{display:"none"}})}var w=t(8182),C=t(36721),E=t(43472),j=t.n(E),O=["className"];function x(){return x=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},x.apply(this,arguments)}var I=(0,r.forwardRef)((function(e,n){var t=e.className,u=function(e,n){if(null==e)return{};var t,r,u=function(e,n){if(null==e)return{};var t,r,u={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(u[t]=e[t]);return u}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(u[t]=e[t])}return u}(e,O),o=(0,C.k)("panel-root"),c=j()(o,t);return r.createElement("div",x({ref:n,className:c},u),e.children)}));I.displayName="PanelRoot";var P=t(52007);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){var r,u,o;r=e,u=n,o=t[n],(u=function(e){var n=function(e,n){if("object"!==R(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===R(n)?n:String(n)}(u))in r?Object.defineProperty(r,u,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[u]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function D(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=K(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,u=function(){};return{s:u,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){a=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(a)throw o}}}}function F(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,u,o,c,a=[],i=!0,l=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;i=!1}else for(;!(i=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);i=!0);}catch(e){l=!0,u=e}finally{try{if(!i&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(l)throw u}}return a}}(e,n)||K(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,n){if(e){if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,n):void 0}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var M=f.ZT;function N(e){var n=e.PanelComponent,t=e.panelId,h=e.placeHolder,g=e.subscribeInfo,S=e.panelMetaData,C=u.Z.getInstance("Panel-".concat(t));function E(e){var u=(0,d.Z)(),E=u.isMainConnected,j=u.streamApi,O=u.metadata,x=(0,l.j)().panelCatalog,R=(0,r.useContext)(o.DF).mosaicActions,z=(0,r.useContext)(o.Jy).mosaicWindowActions,K=H((0,y.R)(),2),T=K[0],N=K[1],Z=(0,i.$G)("panels").t,G=H((0,r.useState)(S),2),U=G[0],L=G[1],W=(0,p.x)(),$=W.enterFullScreen,B=W.exitFullScreen,Q=W.fullScreenFnObj,J=H((0,r.useState)(!1),2),V=J[0],_=J[1],q=H((0,r.useState)(!1),2),X=q[0],Y=q[1],ee=H((0,r.useState)({}),1)[0],ne=(0,r.useRef)([]),te=(0,r.useRef)([]),re=(0,r.useRef)(),ue=(0,r.useRef)(),oe=(0,r.useRef)([]),ce=H((0,r.useState)([{keys:["escape"],handler:function(){Q&&null!=Q&&Q.exitFullScreen&&(null==Q||Q.exitFullScreen())}}]),2),ae=ce[0],ie=ce[1];(0,r.useEffect)((function(){return N((0,v.mS)({panelId:t,keyHandlers:[{keys:["escape"],handler:function(){Q&&null!=Q&&Q.exitFullScreen&&(null==Q||Q.exitFullScreen())},discriptor:Z("exitFullScreen")},{keys:["p"],functionalKey:"ctrlKey",handler:function(e){},discriptor:Z("play"),isGloable:!0},{keys:["s"],functionalKey:"ctrlKey",handler:function(e){},discriptor:Z("stop"),isGloable:!0}]})),function(){N((0,v.x5)({panelId:t,keyHandlers:[{keys:["escape"],handler:function(){Q&&null!=Q&&Q.exitFullScreen&&(null==Q||Q.exitFullScreen())},discriptor:Z("exitFullScreen")},{keys:["p"],functionalKey:"ctrlKey",handler:function(e){},discriptor:Z("play"),isGloable:!0},{keys:["s"],functionalKey:"ctrlKey",handler:function(e){},discriptor:Z("stop"),isGloable:!0}]}))}}),[Z]);var le=H((0,r.useState)([]),2),se=le[0],fe=le[1],de=function(e){var n=(0,b.zk)().customizeSubs,t=(0,r.useRef)(),u=(0,r.useCallback)((function(e){t.current&&t.current.publish(e)}),[]);return(0,r.useEffect)((function(){t.current=n.getCustomizeEvent("channel:update:".concat(e))}),[e]),u}(t),be=(0,r.useCallback)((function(e){ie((function(n){return[].concat(F(n),F(e))}));var n,r=D(e);try{for(r.s();!(n=r.n()).done;){var u=n.value;null!=u&&u.isGloable?N((0,v.vV)([u])):N((0,v.mS)({panelId:t,keyHandlers:[u]}))}}catch(e){r.e(e)}finally{r.f()}}),[]),ye=(0,r.useCallback)((function(e){var n=e.map((function(e){var n;return(null!==(n=null==e?void 0:e.functionalKey)&&void 0!==n?n:"")+e.keys.join()})),r=ae.filter((function(e){var t,r=(null!==(t=null==e?void 0:e.functionalKey)&&void 0!==t?t:"")+e.keys.join();return!n.includes(r)}));ie(r),N((0,v.x5)({panelId:t,keyHandlers:e}))}),[ae]),ve=(0,r.useCallback)((function(e){fe((function(n){return[].concat(F(n),F(e))}))}),[]),me=(0,r.useCallback)((function(e){be(e)}),[be]);(function(e){var n=(0,b.zk)(),t=n.customizeSubs,u=(0,r.useRef)();(0,r.useCallback)((function(e){u.current&&u.current.publish(e)}),[]),(0,r.useLayoutEffect)((function(){t.reigisterCustomizeEvent(e),u.current=t.getCustomizeEvent(e)}),[n,e])})("keydown-add:".concat(t)),function(e,n){var t,u,o,c;t="keydown-add:".concat(e),u=n,o=(0,b.zk)().customizeSubs,c=(0,r.useRef)(),(0,r.useEffect)((function(){return c.current=o.getCustomizeEvent(t),c.current&&c.current.subscribe(u),function(){c.current&&c.current.removeSubscribe()}}),[]),c.current}(t,me);var pe=(0,r.useMemo)((function(){return x.get(t)}),[x]),he=(0,r.useMemo)((function(){var e,n;return null!==(e=null==T||null===(n=T.selectedPanelIds)||void 0===n?void 0:n.has(t))&&void 0!==e&&e}),[T]),ge=(0,r.useCallback)((function(e){re.current=e}),[]),Se=(0,r.useRef)(-1),ke=(0,c.NB)({onResize:function(e,n){Se.current=e,ue.current&&ue.current(e,n),oe.current.forEach((function(t){try{t(e,n)}catch(e){console.log(e)}}))}}).ref,we=(0,r.useCallback)((function(e){ue.current=e,oe.current.push(e),-1!==Se.current&&e(Se.current)}),[]),Ce=(0,r.useCallback)((function(e){var n=R.getRoot(),t=z.getPath(),r=(0,s.r9)(null==pe?void 0:pe.type);R.replaceWith(t,{direction:e,second:r,first:(0,o.Lf)(n,t)})}),[z,R,null==pe?void 0:pe.type]),Ee=(0,r.useCallback)((function(){var e=z.getPath();R.remove(e)}),[R,z]),je=(0,r.useCallback)((function(){return function(e){L(A(A({},e),{},{panelId:t}))}}),[]),Oe=(0,r.useCallback)((function(){he||N((0,v.x_)(t))}),[he,N]),xe=(0,r.useCallback)((function(e){X||!e||(0,a.isEmpty)(e)||Y(!0)}),[X]),Ie=(0,r.useCallback)((function(e){var n;return null!=e&&e.needChannel?null!=e&&e.name&&null!=e&&e.channel&&(n="default"===(null==e?void 0:e.channel)?j.subscribeToDataWithChannelFuzzy(null==e?void 0:e.name):j.subscribeToDataWithChannel(null==e?void 0:e.name,null==e?void 0:e.channel)):n=j.subscribeToData(null==e?void 0:e.name),n}),[j]),Pe=(0,r.useCallback)((function(e){if(E){var n=ne.current,t=n.findIndex((function(n){return n.name===e.name}));if(te.current.forEach((function(e){e.subscription.unsubscribe()})),-1===t){var r=Ie(e);if(r){var u=r.subscribe((function(n){var t,r;xe(n),re.current&&!(0,a.isEmpty)(re.current)&&(null!==(t=null===(r=re.current[e.name])||void 0===r?void 0:r.consumer)&&void 0!==t?t:M)(n)}));n.push({name:e.name,connectedSubject:r}),te.current.push({name:e.name,subscription:u})}}else{var o=te.current.findIndex((function(n){return n.name===e.name}));te.current[o].subscription.unsubscribe();var c=Ie(e);if(c){var i=c.subscribe((function(n){var t,r;xe(n),re.current&&!(0,a.isEmpty)(re.current)&&(null!==(t=null===(r=re.current[e.name])||void 0===r?void 0:r.consumer)&&void 0!==t?t:M)(n)}));n[t]={name:e.name,connectedSubject:c},te.current[o]={name:e.name,subscription:i}}}}}),[E]),Re=(0,r.useCallback)((function(e){if(-1!==ne.current.findIndex((function(n){return n.name===e}))){var n=te.current.findIndex((function(n){return n.name===e}));te.current[n].subscription.unsubscribe(),te.current=te.current.filter((function(n){return n.name!==e})),ne.current=ne.current.filter((function(n){return n.name!==e}))}}),[E]),ze=(0,r.useCallback)((function(e){m.a.addHook(t,e)}),[]),Ae=(0,r.useMemo)((function(){return!(!g||V&&X)}),[V,X]),De=(0,r.useMemo)((function(){return h?r.createElement("div",{style:{width:"100%",height:"100%",display:Ae?"flex":"none"}},h):r.createElement(w.Z,{style:{display:Ae?"flex":"none"},text:Z("noMessages")})}),[Ae]);(0,r.useEffect)((function(){if(!E||O.length<=0)return f.ZT;if(g){for(var e=null==g?void 0:g.length,n=function(){var e=g[t],n=null==e?void 0:e.name;if(!O.find((function(e){return e.dataName===n})))return 1;var r=Ie(e);r&&ne.current.push({name:n,connectedSubject:r})},t=0;t<e;t+=1)n();V||_(!0);var r,u=D(ne.current);try{var o=function(){var e=r.value,n=e.connectedSubject.subscribe((function(n){var t;xe(n),re.current&&!(0,a.isEmpty)(re.current)&&(null!==(t=re.current[e.name].consumer)&&void 0!==t?t:M)(n)}));te.current.push({name:e.name,subscription:n})};for(u.s();!(r=u.n()).done;)o()}catch(e){u.e(e)}finally{u.f()}}return function(){ne.current=[],te.current.forEach((function(e){e.subscription.unsubscribe()}))}}),[O,E]),function(e,n){var t=(0,b.zk)().customizeSubs,u=(0,r.useRef)();(0,r.useEffect)((function(){u.current=t.getCustomizeEvent("channel:notify:".concat(e)),u.current&&u.current.subscribe(n)}),[n]),(0,r.useEffect)((function(){return function(){u.current&&u.current.removeSubscribe()}}),[]),u.current}(t,Pe),function(e,n){var t=(0,b.zk)().customizeSubs,u=(0,r.useRef)();(0,r.useEffect)((function(){u.current=t.getCustomizeEvent("channel:update:".concat(e)),u.current&&u.current.subscribe(n)}),[n]),(0,r.useEffect)((function(){return function(){u.current&&u.current.removeSubscribe()}}),[]),u.current}(t,Pe);var Fe=(0,r.useMemo)((function(){return{display:Ae?"none":"block"}}),[Ae]),He=(0,r.useMemo)((function(){return{panelId:t,initSubscription:ge,logger:C,metaData:U,splitPanel:Ce,closePanel:Ee,updateMetaData:je,enterFullScreen:$,exitFullScreen:B,onPanelResize:we,data:ee,addChannel:Pe,updateChannel:de,closeSubcription:Re,setKeyDownHandlers:be,removeKeyDownHandlers:ye,setKeyUpHandlers:ve,registerFullScreenHooks:ze,subscribeToData:Ie}}),[de,ge,U,Ce,Ee,je,$,B,we,ee,Pe,Re,be,ye,ve,ze]);return r.createElement(P.Q.Provider,{value:He},r.createElement(k,{active:he,keyDownHandlers:ae,keyUpHandlers:se}),r.createElement(I,{id:t,style:Fe,onClick:Oe,ref:ke},r.createElement(n,e)),De)}return Object.assign(r.memo(E),{displayName:n.displayName||n.name})}},52007:(e,n,t)=>{t.d(n,{Q:()=>u,R:()=>o});var r=t(21902),u=(0,r.createContext)(void 0);function o(){return(0,r.useContext)(u)}},34534:(e,n,t)=>{e.exports=t.p+"assets/3acc318f286448bee7dc.png"}}]);